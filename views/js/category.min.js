/**
 * LaboData for Prestashop
 *
 * @author 161 SARL <contact@161.io>
 * @copyright (c) 161 SARL, https://161.io
 * @license https://161.io
 */
!function(n){"use strict";var r;function i(t){n("#ajax_running").css("display",t?"":"none")}var o=!1;function t(){return o}function a(a,e){var t=a.data("xhr");return t||(i(!0),(t=n.ajax({url:a.data("action"),type:"POST",cache:!1,dataType:"json"})).done(function(t){switch(t.growlType){case"notice":a.prop("disabled",!0).attr("disabled","disabled"),n.growl.notice({title:"",size:"large",message:t.growlMessage}),e&&e();break;default:o=!1,n.growl.error({title:"",size:"large",message:t.growlMessage||"Message not found"})}}),t.fail(function(){o=!1,n.growl.error({title:r.errorTitle,size:"large",message:r.errorMessage})}),t.always(function(){t=null,a.data("xhr",t),i(!1)}),a.data("xhr",t)),!1}function e(){var t=n(".btn[data-action]").filter(":not(:disabled)").first();t.length?(i(o=!0),a(t,e)):o=!1}n(function(){r=window.LaboDataTranslate,n(".table.configuration").find("td.pointer").removeAttr("onclick").removeClass("pointer"),n("#btn-add-all").on("click",function(){if(t())return!1;confirm(n(this).data("confirm"))&&e()}),n(".btn[data-action]").on("click",function(){return t()||a(n(this)),!1})})}(jQuery);